<!DOCTYPE html>
<html>
    <head>
        <title>tinumuのホームページ</title>
        <link rel=stylesheet type="text/css" href="../style.css">
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ["\\(","\\)"]] } });
		</script>
		<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML">
		</script>
		<meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />
    </head>
    <body>
		<h1>ABC335 参加の感想</h1>
		<a href="index.html"> 目次に戻る </a>
		<h2>概要</h2>
		<p>
			<a href="https://atcoder.jp/contests/abc335">ABC335のリンクですよ！</a>
		</p>
        <p>
			今回は ABCDEF の 6 完(72:45 + 10:00)(2TLE).
		</p>
		<p>
			ABCD までは順調だったが、 E を誤読して F にいってから E を解いた。
			でも精神状態は前よりかは悪くないと思う。
		</p>
		<h2>A - 202&lts&gt3&lt/s&gt</h2>
		<p>
			S.back() = '4' をするとよい。
		</p>
		<h2>B - Tetrahedral Number</h2>
		<p>
			3 重ループを回す。
		</p>
		<h2>C - Loong Tracking</h2>
		<p>
			頭の方を back にした vector を用意して、移動するごとに頭が移動した座標を push_back していく。
			すると、vector の添字を 0-indexed だとすると、現在の vector のサイズを $s$ とすると、
			$s-p$ 番目の位置にパーツ $p$ の座標が出てくる。
		</p>
		<h2>D - Loong and Takahashi</h2>
		<p>
			実装が面倒くさい。うまいこと座標を回転させて実装した。
		</p>
		<h2>E - Non-Decreasing Colorful Path</h2>
		<p>
			最初、同じ値でも得点が増えると思ってしまったせいで、とんでもない問題だと思って次の問題に行ったが、
			よく見たら種類数だった。ということは強連結成分分解をしてから DAG 上で DP するだけなので解ける。
		</p>
		<h2>F - Hop Sugoroku</h2>
		<p>
			値を使いまわすところを適切に決めてあげれば求めなければいけない状態数は
			$O(N \sqrt{N})$ 程度になりそうだということがわかった
			(解いてた当初は $O(N \log N)$ だと思ってたのですが違いました。訂正しました)。
		</p>
		<p>
			まず、DP の計算式は、
			$$ \mathrm{dp}[u] = \sum_{x, x &gt 0, u+A_u \times x \leq N} \mathrm{dp}[u+A_u \times x] $$ 
			になるので、
			どうにかこれを、 $$ \mathrm{dp}[u] = \mathrm{sum}[u+A_u][A_u] + 1 $$ 
			$$ \mathrm{sum}[u][a] = \mathrm{dp}[u] + \mathrm{sum}[u+a][a] $$
			のように変換できればいいなとなった。
			dp を右から求める過程で $\mathrm{sum}$ を再帰で参照していく感じ。
		</p>
		<p>
			sum をメモ化再帰で求めると、確かに状態数は $O(N \sqrt{N})$ 程度にはなりそうだが、そもそも map みたいなデータ構造に
			$10^8$ 個程度もデータが入ったら TLE してしまう。
			時間計算量を見ると $O(N \sqrt{N} \log N)$ になっているし間に合うはずがない。
			これで 2 TLE した。
			だが、少し気づくと、 $a = A_u$ のとき、
			メモ化のデータが求まっていることになるのだが、このときの $\mathrm{sum}[u][a]$ の値は実は $\mathrm{dp}[u] \times 2 - 1$ になっている。
			さっきの $\mathrm{sum}[u][a]$ の式は
			$$\mathrm{sum}[u][a] = \mathrm{dp}[u] + \mathrm{sum}[u+a][a] $$ だが、 $a = A_u$ であるので、
			$$ = \mathrm{dp}[u] + \mathrm{sum}[u+A_u][A_u] 
			 = \mathrm{dp}[u] + \mathrm{dp}[u] - 1
			 = \mathrm{dp}[u] \times 2 - 1 $$ 
			となるわけである。
			このようにメモ化をせず、 $a = A_u$ のときにこの式により計算を打ち切ってあげると $O(N \sqrt{N})$ で処理できることがわかって
			特に重い計算もない(再帰は重いかもしれないが)ので TLE せずに解くことができる。
		</p>
		<p>
			今もう一回解いたが、メモ化再帰せずに簡単に書けることがわかった。
		</p>
		<script src="https://gist.github.com/tinumu/6776757720bcaf0e06a47dbf25e1982f.js"></script>
		<p>
			これだけで書ける。
		</p>
		<p>
			あと、$O(N \sqrt{N})$ の理由は、$A_i=1$ のものを $1$ つ、 $A_i=2$ のものを $2$ つと入れる余裕があるので
			すべてかぶらないように $A$ を構成するような最大ケースを考えると $O(\sqrt{N})$ 個程度の $A$ の種類数になるから
			と思っていたが、ただそのようなケースは実際には実在しないので、もう少し小さいかもしれない。
		</p>
		<h2>G - Discrete Logarithm Problems</h2>
		<p>
			おそらくであるが、 $P$ の原始根を求めて、それがループになっているので、
			それぞれの値がどのような包含関係になっているかを計算できれば嬉しそう。
			原始根の計算が早ければだが・・・
		</p>
		<h2>感想</h2>
		<p>
			Perf=1997 だった。
			最近はちゃんと 6 完できるようになっていっているので、パフォーマンスが安定しているが、
			あまり爆発力もないという感じ。
			やっぱり EF の解く時間が遅い。何だろうなぁ。
			実質時間をかけたのは F だったが、式変形系は苦手なのかなぁ。
			なんか今回は F が $\sqrt{200000}$ で分けるといいというテクニックだったみたいだから、
			こういう考えを持てれば嬉しいが・・・
		</p>
		(2024/01/06 23:29)
        <hr>
		<a href="index.html"> 目次に戻る </a>
	</body>
</html>
