<!DOCTYPE html>
<html>
    <head>
        <title>tinumuのホームページ</title>
        <link rel=stylesheet type="text/css" href="../style.css">
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ["\\(","\\)"]] } });
		</script>
		<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML">
		</script>
		<meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />
    </head>
    <body>
		<h1>ABC330 参加の感想</h1>
		<a href="index.html"> 目次に戻る </a>
		<h2>概要</h2>
		<p>
			<a href="https://atcoder.jp/contests/abc330">ABC330のリンクですよ！</a>
		</p>
        <p>
			今回は ABCDEF の 6 完 (59:51+05:00, Eで1RE)
			なんか変な解き方したのが多かったがまあまあいい感じではある。
		</p>
		<h2>A - Counting Passes</h2>
		<p>
			for を回す。
		</p>
		<h2>B - Minimize Abs 1</h2>
		<p>
			問題読解に時間を費やした。まあ範囲外の時とそうでないときを場合分けすると解ける。
			範囲外のときは $L, R$ どちらか近いほう、そうでないときは $A_i$ を出力する。
		</p>
		<h2>C - Minimize Abs 2</h2>
		<p>
			形からして、全探索ができそうなのはわかる。
			$x$ を回しておくと、$D - x^2$ が出るので、これ以下の最大の $y^2$ を見つけてくる。
			sqrt 関数を使ってもいいが、自分は二分探索で見つけた。
			この時、$(x, y)$ か $(x, y+1)$ について見てあげると、候補はすべて列挙できる。
		</p>
		<h2>D - Counting Ls</h2>
		<p>
			条件を満たすようなマスの角に該当するようなところをみて、縦にある 'o' と、横にある 'o' の
			数をかければ良い。自分は $4$ 方向の可能性を全部やるために縦に対する累積和と横に対する累積和
			を取って計算したが、どうやら、一気に計算できたようだ。
		</p>
		<p>
			ちょっとそういう経緯から実装に時間がかかってしまった。
		</p>
		<h2>E - Mex and Update</h2>
		<p>
			とりあえず $\mathrm{mex}$ は $N$ 以下であることがわかる。
			ある値 $x$ の個数を $c_x$ みたいに取っておくと、 $c_x = 0$ であるところの最小を探せばいい。
			さっきの $\mathrm{mex}$ が $N$ 以下なことを考えると、$c_x$ の配列数は $N+1$ 個だけあれば十分である。
			それより大きい値は考慮しない。
		</p>
		<p>
			このようにする時、$c_x = 0$ であるところを $x$ で更新するような RMQ を作ると、$\mathrm{mex}$ が
			もとまる。クエリの更新も値の変更のために高々 $2$ 回程度しか更新しないので、普通に間に合う。
		</p>
		<p>
			RMQ みたいなのを使わなくても set を使っても解ける。
		</p>
		<h2>F - Minimize bounding Square</h2>
		<p>
			まず、$X, Y$ は独立して考えられる。idx をずらしても問題なし。よって $X, Y$ ごとにソートしてOK.
			この問題は、ある１辺の長さと点を集める位置を決定できればそこにすべて座標を持ってくるときの
			操作回数が $K$ 以下であるかという判定問題になる。
		</p>
		<p>
			わかりやすさのためここでは $X$ だけ考えてみる。
		</p>
		<p>
			まず１辺の長さ $L$ を決めうってみる。だが、この時点ではどこに集約するのが最適なのかが決まらない。
			ここで重要な考察として、１辺の範囲を $[l, r]$ だとすると、最適な答えの中に $l = X_i$ であるか
			$r = X_i$ である $i$ が存在することがわかる。
			これは範囲外の点について右にあるものと左にある物の数が変わらない場合操作回数が同じになるからである。
		</p>
		<p>
			そのため、$X_i$ を範囲の左にする時のものと、 $X_i$ を範囲の右にするときのものの操作回数を
			列挙してその中の最小のものを調べれば $X$ 座標における １辺の長さ $L$ の最小の操作回数がわかる。
			$Y$ も同じように処理すればいい。
		</p>
		<p>
			例によって、この問題は $L$ に対して操作回数が単調減少になるので二分探索ができ、
			この問題を解くことができる。
		</p>
		<p>
			個人的な感想として、Absolute Minima が役に立ったかなと思った。
		</p>
		<h2>G - Inversion Squared</h2>
		<p>
			なんかうまいこと主客転倒のテクニックが使えないかなと思ったのだが、二乗和を求めるらしく、
			うまく行かなさそうだということがわかった。
		</p>
		<p>
			他に考えられることとしては、転倒数が $k$ である順列の数 $f(k)$ を数え上げられれば、
			$k$ に対して答えが $k^2 f(k)$ になるよなぁとは思った。
		</p>
		<p>
			後は順列の性質とかちょっと調べたりしていたがまあちょっと難しすぎるね。
		</p>
		<h2> 感想 </h2>
		<p>
			Perf=2056 でややレートが上がった。コンテスト中にテンパるのをどうにかしたい。
			なんか F の実装で変に時間を掛けてしまった気がする。
		</p>
		<p>
			最近はとりあえずパフォーマンスが安定しつつはあるので継続できればいいと思う。
		</p>
		(2023/11/25 23:23)
		<h2> 追記 </h2>
		<p>
			色々と後から想定解も見ながら解いてみた。
		</p>
		<p>
			B は std::clamp というものが存在しているようでこれのおかげで場合分けが要らなくなるようだ。
		</p>
		<p>
			F についてだが、これも別解の解説を見ると実装が簡単になるようだ。ほぼ解説と同じだが頭の整理の為書いておく。
			この問題の $L$ を決めたときの小問題は、区間の位置を選んでその区間の位置に玉をすべて持ってくるときの最小の操作回数を
			求める問題になっている。
		</p>
		<p>
			区間の左端を右に動かした時、ある玉 $i$ についてどのようにコストが変化するかと言うと、
			区間の長さを $L$, 左端を $X$ , 玉の座標を $x_i$ とした時、$X = x_i-L$ の時、傾き $-1$ から $0$ に変化し、
			$X = x_i$ の時傾き $0$ から $1$ に変化するという形になっている。
		</p>
		<p>
			このような形になっているものは傾きが変化する $x_i-L$ と $x_i$ について考えるとよく、
			このような座標をすべて入れてソートした時、傾きがゼロになっている座標はこの配列の $N$ 番目と $N+1$ 番目の間になっている。
			下に凸の凸関数で傾きが $0$ の場所は最小値になっているのでその部分の座標は操作回数の最小を示すことになる。
		</p>
		<p>
			この座標のソートはマージで大丈夫で $O(N)$ でできる。座標が見つかったら、
			後は普通にシミュレートするだけなのでこれも $O(N)$ である。
			といった感じで解くとかなり実装量が減る。
		</p>
		<p>
			上で <a href="https://atcoder.jp/contests/abc127/tasks/abc127_f">ABC127 F の Absolute Minima</a>
			が役に立ったと書いたが、まさに傾きを持つやり方という意味で一致している。
			この調子で <a href="https://atcoder.jp/contests/arc070/tasks/arc070_c"> ARC070 E の NarrowRectangles</a> も解きたい。
			厳密には解いているが、もう解法を忘れている。
		</p>
		(2023/11/26 02:58)
        <hr>
		<a href="index.html"> 目次に戻る </a>
	</body>
</html>
