<!DOCTYPE html>
<html>
    <head>
        <title>tinumuのホームページ</title>
        <link rel=stylesheet type="text/css" href="../style.css">
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ["\\(","\\)"]] } });
		</script>
		<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML">
		</script>
		<meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />
    </head>
    <body>
		<h1>水DiffからSolver順に解く　ひとことコメント#4 #000301-#000400</h1>
		<a href="index.html"> 目次に戻る </a>
		<h2>概要</h2>
		<p>
			<a href="https://kenkoooo.com/atcoder/#/list/tinumukiti631?rated=Only+Rated&status=All&fromDiff=1200&toDiff=1000000000000000000&sortBy=solverCount&sortOrder=desc">AtCoder Problemsのリンク</a>
		</p>
        <p>
			今回も 100 問解き、合計 400 問解けました。
			今回の問題の傾向は 青 Diff の ABC 問題てんこ盛りという感じでしょうか。新しい ABC でもかなり増えてきた感じがある。
			あと AGC の青の問題も結構多い。あと ARC の水色がちょこちょこ出た感じだった。
			基本的に ABC の水色に毛が生えたくらいの難易度が多く、実装難だったりするものがあるので Diff が高めなのかもしれない。
			でも少し難し目のアルゴリズムを要求する問題も増えてきた気がする。
			$O(3^N)$ のやつとか包除原理を使うやつとか、高速ゼータ変換を使うやつとか、並列二分探索を使うやつとか。
			半分全列挙も少しテクニカルだと Diff が上がる。あと bitset 高速化とかもある。
			あと難しい基盤で水色とかで使われるアルゴリズムを利用したりとか、まあ色々ある。
			まあ ABC については実装が重いのが多かったような感じがする。
		</p>
		<p>
			今回は 100 問自力 AC です。今回はちゃんと通るだろう解法ですべて通せたのでよかった。
			その上で様々な解法に触れられたのでかなり力になったと思う。
			データ構造も使えるものが結構増えた。
		</p>
		<p>
			そんなこんなで、11/07 から 12/10 までこの100問を解いたわけです。
			どんどん解くのが遅くなっているが、やっぱり書くのとの並行作業になると書く量も増えているしこのくらいかかっちゃうようだ。
		</p>
		<p>
			Solver が 2515 人から 2050 人までの問題でした。
		</p>
		<h2>#000301 Bracket Sequencing</h2>
		<p>
			既に括弧列になっている部分文字列については特に考慮する必要もないのでこれらをすべて消してみる。
			すると、"))...)((...(" というような文字列だけが残ることがわかる。
			仮に $i$ の ')' の数を $L[i]$ , '(' の数を $R[i]$ とすると、
			$R[i]-L[i] \geq 0$ のものについて $L[i]$ の小さい順に
			左から並べていくと最も途中で ')' が '(' の数を超えにくい構造になっている。
			$R[i]-L[i] &lt 0$ のものについては、 $R[i]$ の小さい順に
			右から並べていくと良い。
			これをつなげたときに括弧列が完成するならば "Yes" という感じだ。
		</p>
		<h2>#000302 Find Symmetries</h2>
		<p>
			$A, B$ を選んだときの答えと $(A+1) \bmod N, (B+1) \bmod N$ を選んだときの答えが実は同じになる。
			比較する部分の要素に全く変化がないからである。
			したがって、$A=0$ と固定して、$0 \leq B &lt N$ である $B$ について調べればよく、
			これは $O(N^3)$ で数えることができる。
		</p>
		<p>
			これを考えなくても一応差分を利用して問題を解くことができるが変に実装が長くなる。
		</p>
		<h2>#000303 Sky Reflector</h2>
		<p>
			まず $N=1$ のときは $K^M$ が答えであり、$M=1$ のときは $K^N$ が答えになる。
			これを除いて $N, M \geq 2$ のときについて考える。
		</p>
		<p>
			$B$ の最小値 $b$ について考えてみる。$b$ が最小値になるような 
			$B$ のパターンは $(K-b+1)^M - (K-b)^M$ 通りある。
			また $b$ が決まっていると、$A$ の値というのは $b$ 以下の任意の値ということになる。
			そのため $A$ のパターンは $b^N$ 通りあると言え、答えは、
			$$ \displaystyle \sum_{b=1}^{K} b^N \times ((K-b+1)^M - (K-b)^M) $$
			ということになる。
		</p>
		<p>
			$B$ のパターンの数についてすぐにでてくると嬉しい。$b$ よりも大きい $B$ の最小値になるものを
			引けばいいということがすぐにわからなくて手こずった。
		</p>
		<h2>#000304 Integer Product</h2>
		<p>
			まずすべての値を $10^9$ 倍しておく。この時、積が整数になるという条件は、$10^{18}$ で割り切れることと同値である。
			これをもっと突き詰めて考えると、整数が $2$ で何回割り切れるか, $5$ で何回割り切れるかという情報だけ持っておけば
			良いことがわかる。これを $i, j$ で足したときに どちらも $18$ 回以上割り切れるならば良いという感じである。
		</p>
		<p>
			$A[i] \times 10^9$ が $2$ で割り切れる数を $X[i]$ , $5$ で割り切れる数を $Y[i]$ とすると、
			$X[i]$ の小さい方から見て、$X[i] + X[j] \leq 18$ であるような $j$ について、
			$Y[j]$ の数を足し上げていく。cnt[Y[j]]++ のようなことをする。
			すると、$18-X[i]$ 以上の $Y$ についてはすべて $i$ について条件を満たすことがわかるので、
			その数を足し上げる。
		</p>
		<p>
			なお、これだと $i &lt j$ ではないが、同じものを取り除く処理をした後答えを $1/2$ したらその答えが出てくる。
		</p>
		<h2>#000305 Odd or Even</h2>
		<p>
			まず、$A_1, A_2, \cdots, A_K, A_{K+1}$ について、この中のある一つの要素を使わないようにするような
			感じで、それぞれ聞いていく( $K+1$ 回)。
			すると、それらの総和が、 $K(A_1 + A_2 + \cdots + A_{K+1})$ となっており、この答え $S$ が求まっているはずである。
			今回は偶奇だけが重要であるので、$K$ が奇数より、 
			$A_1 + A_2 + \cdots + A_{K+1}$ の総和の偶奇が求まったことになる。
			すると、先程各要素を使わない答えを求めていたので、例えば $A_1 + A_2 + \cdots + A_K$ の答えとの比較をすると、
			$A_{K+1}$ の答えを知ることができる。あとは、それぞれ $A_i$ を使ってないときの答えと照らし合わせると、
			最終的に $A_1$ から $A_{K+1}$ の中身を知ることができる。
		</p>
		<p>
			あとは、右にスライドしていくと、次々と $A$ の中身を知ることができ、
			これら合わせて合計 $N$ 回ちょうどで行うことができる。
		</p>
		<h2>#000306 RGB Coloring</h2>
		<p>
			赤色を塗った後青色を塗ると緑色になるといった解釈をして考えていくと良い。
			すると、まず赤色を塗る個数を選び、それをもとに青色を何個塗らないといけないかがわかるので、
			それぞれの塗る個数を $r, b$ とすると、$ \binom{N}{r} \times \binom{N}{b}$ によって答えが求まる。
			これをすべての $j$ について見ていけば良い。
			もちろん $K-rA$ が $B$ で割り切れないとそもそも作れない。
		</p>
		<h2>#000307 Triple Shift</h2>
		<p>
			まず入っている値が一致しないといけないのでそうでない場合を取り除いておく。
		</p>
		<p>
			操作によって逆操作ができるので、$B$ も操作できる。
			つぎに $A$ の値が重複なしの場合を考える。この場合それぞれの操作で転倒数が $2$ ずつ変化する。
			そしてこの時転倒数を $0$ あるいは $1$ にすることが可能である。
			$A_{N-2}$ までソートしたときの、 $A_{N-1}$ と $A_N$ の大小関係がその転倒数 $0$ か $1$ かである。
			以上を考えると、$A$ と $B$ の転倒数の偶奇が一致しない場合はどうやっても不可能で、
			偶奇が一致する場合は $A, B$ ともに $A_{N-2}$, $B_{N-2}$ までソートしてあげると必ず一致している。
		</p>
		<p>
			同じ値がある場合はどうだろうか。このとき、同じ値同士を入れ替えると、
			転倒数の偶奇を変化させることができるはずだ。そしてこれが重要な本質であり、
			その同じ値の位置関係を保ったまま $A_{N-2}$ までソートできるので、転倒数を偶数にしてから
			ソートを行うと完全にソートができる。
			そのため、$A, B$ ともにソートして同じ値にすることができる。
		</p>
		<h2>以下テンプレート</h2>
		<h2>まとめてみる</h2>
		<h2>重要な問題を並べる</h2>
		<h3>重要</h3>
		<h3>準重要</h3>
		<h2>感想</h2>
		(2023/12/11 23:59)
        <hr>
		<a href="index.html"> 目次に戻る </a>
	</body>
</html>
