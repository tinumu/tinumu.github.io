<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="../mainstyle.css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript"
src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
inlineMath: [['$','$'], ['\\(','\\)']],
processEscapes: true
},
CommonHTML: { matchFontHeight: false }
});
</script>

<title>Diary</title>
</head>
<body>
<h1>JOI2008春合宿1-2 Sheet</h1>
<h2>概要</h2>
<p>
色の異なる紙が $N$ 枚ある。 これらは長方形で、$H$ 行 $W$ 列の長方形のテーブルに平行になるように設置する。<br>
$N$ 枚の紙を設置するとき、後から設置したものが、以前に設置した紙に重なる。<br>
設置後、テーブルの写真を撮ったため、そこから紙が置かれた順番として考えられるものを $1$ つ求めよ。<br>
紙やテーブルの縦横の大きさはすべて整数である。<br>
マスの色は $C_{i,j}(1 \leq i \leq H , 1 \leq j \leq W)$ であり、紙 $C_{i,j}$ の色であることを示す。
</p>
<h2>制約</h2>
<ul>
<li>$1 \leq N \leq 1000$</li>
<li>$1 \leq H, W \leq 100$</li>
<li>$1 \leq C_{i,j} \leq N$</li>
</ul>
<h2>解法</h2>
<p>
答えであるどれがどの順番で重なっているかということは明らかではないが、$2$ つの色についてどっちのほうが後に設置したのか？という比較は明らかに出来るところがある。<br>
$2$ つをノードとすると、どちらが先か後か決めるエッジが存在するので、矛盾のない順番で並べるためにトポロジカルソートを必要とするということが分かる。<br>
トポロジカルソートについての詳しい説明は<a href="16.html">「最悪の記者」</a>でしている。<br>
トポロジカルソートを使用することで解けることはわかった。ではどのように先か後かを比較するのか?<br>
</p>
<p>
一つの紙について、置かれていると確認できるところまでを範囲とする(紙 $k$ が置かれている $C_{i,j}$ の $x, y$ 軸の最小と最大をとって長方形とする)。<br>
その範囲の中に別の紙 $j$ が置かれている場合、$i$ よりも $j$ のほうが後に置かれたということが分かる。<br>
これに対して、$i$ から $j$ へエッジを張ればいいということが分かる(再帰を用いた帰りがけ順にやる場合は $j$ から $i$ に張ったほうが後からreverse()しなくて済む。<br>
後はトポロジカルソートをすれば問題を解くことが出来る。
</p>
<p>
ちなみに置かれていると確認されてないところでも事実上は置かれているのではないかということについてだが、<br>
画像以外に置かれているか確認できる手立てはないので、たとえ置かれていたとしても、画像から置かれていないことにすることはできる。<br>
置かれていないと判断できる時点で、置かれていない場合の通りがあり得るため(置かれていないとすることで通りは増える)、置かれていないことにしないと問題は解けない。
</p>
<h2>ソース</h2>
<script src="https://gist.github.com/tinumu/857288ab4ca23a337966752e48975320.js"></script>
<h2>感想</h2>
<p>
確定できる事実以外は自由に決められるということを考えるきっかけとなった。<br>
トポソするにおいて、エッジという情報で与えられなくても、二つのノードを比較するっていう時があったら積極的に疑っていきたい。
</p>
</body>
</html>
