<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="../mainstyle.css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript"
src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
inlineMath: [['$','$'], ['\\(','\\)']],
processEscapes: true
},
CommonHTML: { matchFontHeight: false }
});
</script>

<title>Diary</title>
</head>
<body>
<h1>JOI2008春合宿1-1 Committee</h1>
<h2>概要</h2>
<p>
委員会がある。委員会の人間が $n$ 人いて、それぞれに部下と上司がいる。委員長が一番上の人(一人)である(委員長は上司を持たない)。<br>
なんと委員は部下と上司しか顔を知らないという。知らない人同士のやり取りには上司を介さなければならない。<br>
また、委員にはやる気 $a_i(1 \leq i \leq n)$ というのが存在している。<br>
プロジェクトを立ち上げるらしい。これには一人以上の委員を選ぶ。極秘なため、プロジェクト参加者以外の委員に知れてはならない。<br>
プロジェクトに参加する委員を適切に選んだ時、やる気の総和の最大値を求めよ。<br>
</p>
<h2>制約</h2>
<ul>
<li>$1 \leq n \leq 10^5$</li>
<li>$-100 \leq a_i \leq 100$</li>
</ul>
<h2>解法</h2>
<p>
この問題の構造は木構造である。最初自分は、連続するところの和が最大になるようにしなければならないということばっかりを考えていた。<br>
まあその通りなんだけど、考え方が固いと思う。便宜上根は決まっているだけ！！と考えるよりも根を使おう。<br>
<br>
一回、自分と自分の部下のみで構成されるプロジェクトについてやる気を最大化しようと思う。<br>
自分が参加しなければ部下同士がやり取りできないので自分は必ず参加しなければならない。<br>
そのプロジェクトを最大化するには、自分の直接的な部下が構成するプロジェクトの最大のやる気が正であれば、取り入れるといった手法をとる。<br>
つまりこれは再帰的に求めることが出来、葉となる最下位の部下のやる気を基底条件とし、そこからやる気を最大化していくということである。<br>
最終的にはどこを媒介とするプロジェクトが一番やる気が高いのかということを考えながらこの問題を解くことが出来る。<br>
またこの問題は木の親から順に与えられるので、葉から遷移していくようにするには後ろからfor文で回せばよいようだ。<br>
もし、部下とか上司とかの概念ではなく、単なる木として与えられていた場合、†全方位木DP†をすればいいのかな<br>
</p>
<h2>ソース</h2>
<script src="https://gist.github.com/tinumu/21d6b014c4a6e7c79dccf5846cd30ffa.js"></script>
<h2>感想</h2>
<p>
木構造の問題は再帰で解けるはずである。どこを根とするかは決まっていたり決まっていなかったりするけれど...<br>
ミソは、木は部分木を持つというところである。<br>
どのような木の問題が出るかはわからないが、部分木から現在のノードを含ませるような木について求めるというテクニックは使える。
</p>
</body>
</html>
