<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="../mainstyle.css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript"
src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
inlineMath: [['$','$'], ['\\(','\\)']],
processEscapes: true
},
CommonHTML: { matchFontHeight: false }
});
</script>

<title>Diary</title>
</head>
<body>
<h1>JOI2009春合宿 Day 4-1 Distribution(冊子の配布)</h1>
<h2>概要</h2>
<p>
<a href="https://www.ioi-jp.org/camp/2009/2009-sp-tasks/2009-sp_tr-day4_23.pdf">これ。</a><br>
委員会があって、委員会の人間は $n$ 人いる。<br>
<a href="21.html">Committee</a>みたいに上司と部下がいて、委員のやる気は $a_i(1 \leq i \leq n)$ である。<br>
プロジェクトを立ち上げる。それぞれの委員のやる気の合計を最大にしたい。<br>
まず、委員長に $m$ 冊の冊子が渡される。この冊子を読んだ人がプロジェクトに参加する。<br>
冊子は上司から部下へ渡される。<br>
委員は $1$ 冊以上冊子を持っているときその冊子を読み、自分の部下に冊子を渡す。 <br>
それぞれの部下に分配する冊子の枚数は自分の持っている枚数の限り自由である。<br>
この条件の下、プロジェクトに参加する人間のやる気の合計の最大値を求める。<br>
</p>
<h2>制約</h2>
<ul>
<li>$1 \leq n \leq 10000$</li>
<li>$1 \leq m \leq 1000$</li>
<li>$0 \leq s_i \lt i$ (自分の上司 ... $s_i = 0$ の時自分は委員長)</li>
<li>$1 \leq a_i \leq 10000$</li>
</ul>
<h2>解法</h2>
<p>
最初、dp[委員][現在渡されている冊子] にしてこれを最大化すればいいんじゃないかって思うんだけれど、<br>
よく考えてみると、dpで分配するときに、すべての冊子数に対して処理を行わなければならなくなって、<br>
$O(m^2n)$ となってしまい、うまくいかない。<br>
<br>
違う視点で考えてみることにした。<br>
$m$ 冊の冊子は最終的に $m$ 個の葉に辿り着くような形になれば、うまく取れることが分かるため、<br>
この葉の選び方をどのようにすればいいかという問題に帰着するわけである。<br>
<br>
このとき、$1$ 冊葉に伝搬させるときの最大のやる気となる葉を貪欲に選ぶという手法をとる。<br>
選んでいった委員についてはやる気を $0$ にしておくこと。<br>
なぜこれで大丈夫かというと、葉の中で A, B の葉2つどちらも選ぼうとするときに、<br>
Aを先にとるべきかBを先にとるべきかという比較をしてみる。<br>
共通の経路はいずれにしても先にとられてしまうので関係ない。<br>
共通しない分かれたAとBの経路について選択する意味があるということである。<br>
共通しないところにおいてはどっちを先にとろうが他のところに影響を与えることはないため、<br>
限られた $m$ 冊しかない冊子をどっちに先に渡せばいいかというと、<br>
その共通しないところのやる気の大きさが大きいほうを先に選んでおいた方が得だということになる。<br>
たとえ共通したところを含めたとしても、やる気の大小に変更はないので特に考慮しなくてもよいとはこういうことである。<br>
これはどの2つの葉においても共通の事項であるため、一番大きくなるような葉を選べばよいということになる。<br>
<br>
共通部分のやる気を $D$ としよう。 共通しない2つを $X$, $Y$ としよう。<br>
この時 $X \gt Y$ だったら $X + D \gt Y + D$ であるし、<br>
$X \lt Y$ だったら $X + D \lt Y + D$ ということだ。<br>
等しいときは等しくなるよね<br>
</p>
<h2>ソース</h2>
<script src="https://gist.github.com/tinumu/4beea51873fd99ad591f18534a373d3d.js"></script>
<h2>感想</h2>
<p>
小さな事実から答えが編み出されるので、たくさんの事実を見つけていこう。<br>
問題は、感覚的にこうすればいいのだなと分かったが、いざ説明してみるとどういうことなのだろうってなってしまうね。<br>
<b>2つの比較について見出した結果がすべての2つの組合せにおいて同じことが言えるならば、<br>
全体の中で見出した結果になることと同じ意味になることを良く意識する</b><br>
これをすれば新たなアプローチとなるはず！
</p>
</body>
</html>
